<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ccnu.mobilebank.mapper.TransrecordMapper">
    <select id="getPeriodIncome" resultType="com.ccnu.mobilebank.pojo.Transrecord">
        select
               money,updateTime
        from
             transrecord
        where
              otherId = #{accountId}
          and updateTime between #{start} and #{end}
          and isDelete = 0
    </select>

    <select id="getPeriodOutcome" resultType="com.ccnu.mobilebank.pojo.Transrecord">
        select
            money,updateTime
        from
            transrecord
        where
            accountId = #{accountId}
          and updateTime between #{start} and #{end}
          and isDelete = 0
    </select>

    <select id="getTransrecordsByAccountId" resultType="com.ccnu.mobilebank.pojo.Transrecord">
        SELECT *
        FROM transrecord
        WHERE (accountId = #{accountId} OR otherId = #{accountId})
          AND isDelete = 0
        ORDER BY updateTime DESC
        LIMIT #{size} OFFSET #{offset}
    </select>
    <select id="getTransrecordsByAccountIdAndTime" resultType="com.ccnu.mobilebank.pojo.Transrecord">
        select * from transrecord
        where (accountId = #{accountId} or otherId = #{accountId})
            and updateTime between #{start} and #{end}
            and isDelete = 0
        order by updateTime desc
        limit #{size} offset #{offset}
    </select>

    <insert id="insertTransRecord" parameterType="com.ccnu.mobilebank.pojo.Transrecord">
        insert into
            transrecord(
                accountId,
                otherId,
                money,
                transDate,
                transtypeId,
                isDelete
            )values(
                #{accountId},
                #{otherId},
                #{money},
                #{transDate},
                #{transtypeId},
                #{isDelete}
                )
    </insert>

</mapper>
